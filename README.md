# Скачиватель избранных картинок из ВКонтакте

Если вы любитель складировать в "закладках" вк разные прикольные или красивые картинки, то этот говноскрипт поможет вам регулярно выкачивать их себе на жесткий диск. На всякий случай.

Разумеется, скрипт писался под весьма конкретные вещи, и не претендует на мега-универсальность, и вообще говнокод. Однако ничто не мешает вам поправить в нём что-то под свои нужды, благо что кода тут на пару экранов.

## Особенности

1. При повторном запуске не скачивает заново то что было скачано
2. Старается скачать картинку максимального качества
3. Считает ссылку на картинку в описании ссылкой на оригинал и отдаёт ей приоритет
4. Считает прикрепленный к посту с картинкой документ оригиналом и отдаёт ему приоритет
5. Умеет скачивать серии картинок из лайкнутых постов
6. Если лайкнули картинку, полезет за описанием в пост, который её содержал
7. Хавает теги из описания поста и вешает аналогичные OS X 
теги

## Установка

1. Скачайте зависимости: `./composer.phar install`

### Системные требования
* OS X или linux
* свежий PHP. Не менее 5.4. На макоси берется из `brew`.

## Авторизация

Сначала вам придётся пройти 10 кругов ада VK Api.

1. [Создайте Standalone-приложение](https://vk.com/editapp?act=create)
1. Зайдите в настройки нового приложения и найдите там *ID приложения* и *Защищенный ключ*
1. Запустите `php index.php get_token -a id_приложения -s защищенный_ключ`
1. Перейдите по предложенному URL, дайте доступ своему приложению
1. Скопируйте в буфер значение `code` из адресной строки
1. Запустите `php index.php get_token -a id_приложения -s защищенный_ключ -c тот_самый_code`
1. Ура! Вы получили токен. Запишите его куда-нибудь

## Запуск

Теперь можно и выкачивать. 
Рекомендую сохранить команду загрузки в виде sh-скрипта, чтобы не писать все это по сто раз. `*.sh` как раз в `.gitignore`

```
php index.php download \
  --token="тот_самый_токен" \
  --owners="123,-1234"
```

Здесь `owners` — необязательный фильтр по владельцам поста/картинки. ID через запятую. Так можно отфильтровать только интересующие паблики.

# Если у вас возникли вопросы
## Сами как-нибудь разбирайтесь